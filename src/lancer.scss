/* TODO: Rewrite to split into multiple modules and utilize sass mixins where possible */

@use "styles/overrides";
@use "styles/applications";
@use "styles/chat";
@use "styles/layout";
@use "styles/combat/lancer-combat-tracker";
@use "styles/combat/combat-tracker-config";
@use "styles/settings/lancer-initiative-config";
@use "styles/sheets/actor";
@use "styles/sheets/components";
@use "styles/sheets/item";
@use "styles/token/token-config";

/* Item/document types, useful for shorthand */
$item-types: core_bonus environment faction frame manufacturer npc_class npc_template npc_feature weapon_mod mech_system
  mech_weapon organization pilot_armor pilot_gear pilot_weapon reserve sitrep skill status tag talent quirk;
$actor-types: npc pilot mech deployable;
$document-types: join($item-types, $actor-types);

/* Settings Layer*/
:root {
  --main-font-family: Helvetica, Arial, sans-serif;
  --monospace-font-family: Consolas, "Courier New", Courier, monaco, monospace;

  /* Sheet theme vars */
  --primary-color: #991e2a;
  --primary-highlight: color-mix(in srgb, var(--primary-color), #fff 55%);
  --color-shadow-primary: #991e2a;
  --light-text: #efefef;
  --dark-text: #000000;
  --background-color: #ededed;
  --secondary-color: #9e541f;
  --secondary-highlight: color-mix(in srgb, var(--secondary-color), #fff 55%);
  --secondary-text: #ffffff;
  --dark-gray-color: #4d4d4d;
  --light-gray-color: #919a9b;
  --tooltip-background: #ffffff;
  --tooltip-text: #000000;
  --ref-color: color-mix(in srgb, var(--primary-color), #fff 90%);

  /* Manufacturer theme vars */
  --gms-color: #991e2a;
  --ips-n-color: #1662b8;
  --ssc-color: #d1920a;
  --horus-color: #00a256;
  --ha-color: #6e4373;

  /* Gear and type color vars */
  --system-color: #58b434;
  --weapon-color: #111111;
  --trait-color: #0a7674;
  --mod-color: var(--trait-color);
  --bonus-color: #5d8673;
  --bonus-list-color: #71a373;
  --tech-color: #7d2477;
  --talent-color: #3a81c3;
  --pilot-stat-color: color-mix(in srgb, var(--background-color), #888 50%);

  /* Action color vars */
  --reaction-color: #892eb1;
  --protocol-color: #c75a00;
  --quick-color: #3949ab;
  --quick-tech-color: #3949ab; // TODO is this needed?
  --invade-color: #222222;
  --full-color: #283593;
  --full-tech-color: #283593; // TODO is this needed?
  --free-color: #00695c;
  --move-color: #cc0a0a;

  /* Hit type color vars */
  --crit-color: #9c5e35;
  --hit-color: #337494;
  --miss-color: #3c3c3c;
  --error-color: #b4800e;

  /* Accurate / difficult color vars */
  --accurate-color: #0d689c;
  --difficult-color: #9c0d0d;

  /* Darkens tone by a small increment. For some themes should probably lighten instead, somehow? */
  --darken-color: 0, 0, 0;
  --darken-1: rgba(var(--darken-color), 0.1);
  --darken-2: rgba(var(--darken-color), 0.2);
  --darken-3: rgba(var(--darken-color), 0.3);
  --darken-4: rgba(var(--darken-color), 0.4);
  --darken-5: rgba(var(--darken-color), 0.5);

  /* Darkens tone by a small increment. For some themes should probably lighten instead, somehow? */
  --lighten-color: 255, 255, 255;
  --lighten-1: rgba(var(--lighten-color), 0.1);
  --lighten-2: rgba(var(--lighten-color), 0.2);
  --lighten-3: rgba(var(--lighten-color), 0.3);
  --lighten-4: rgba(var(--lighten-color), 0.4);
  --lighten-5: rgba(var(--lighten-color), 0.5);

  /* box-shadow values for hover glow and buttons */
  --hover-bright: inset 0 0 0 10em rgba(255, 255, 255, 0.15);
  --button-shadow: 1px 1px 1px 0.6px var(--darken-5);

  /* Clip paths */
  $clip_in: 10px;
  --top-dogear-path: polygon(#{$clip_in} 0, 100% 0, 100% 100%, 0 100%, 0 #{$clip_in});
  --bottom-dogear-path: polygon(0 0, 100% 0, 100% calc(100% - #{$clip_in}), calc(100% - #{$clip_in}) 100%, 0 100%);
  --double-dogear-path: polygon(
    #{$clip_in} 0,
    100% 0,
    100% calc(100% - #{$clip_in}),
    calc(100% - #{$clip_in}) 100%,
    0 100%,
    0 #{$clip_in}
  );

  --reaction-clip-path: polygon(
    0 0,
    100% 0,
    100% 1px,
    calc(100% - 9px) 1px,
    calc(100% - 8px) 2px,
    100% 2px,
    100% 3px,
    calc(100% - 7px) 3px,
    calc(100% - 6px) 4px,
    100% 4px,
    100% 5px,
    calc(100% - 5px) 5px,
    calc(100% - 4px) 6px,
    100% 6px,
    100% 7px,
    calc(100% - 3px) 7px,
    calc(100% - 2px) 8px,
    100% 8px,
    100% 100%,
    0 100%
  );
  --tech-clip-path: polygon(
    0 0,
    calc(100% - 12px) 0,
    calc(100% - 12px) 7px,
    calc(100% - 7px) 7px,
    calc(100% - 7px) 3px,
    calc(100% - 3px) 3px,
    calc(100% - 3px) 0,
    100% 0,
    100% 3px,
    calc(100% - 3px) 3px,
    calc(100% - 3px) 7px,
    calc(100% - 7px) 7px,
    calc(100% - 7px) 12px,
    100% 12px,
    100% 100%,
    0 100%
  );
}

/* Elements Layer */

/* General-purpose theme color classes */
/* prettier-ignore */
$theme-types: "primary" "secondary" "dark-gray" "light-gray" "tooltip"    // General themes
  "gms" "ips-n" "ssc" "horus" "ha"                       // Manufacturers
  "trait" "mod" "bonus" "system" "tech" "talent" "weapon"     // Gear types
  "reaction" "protocol" "quick" "full" "move" "free"; // Action types
@each $theme-type in $theme-types {
  /* Headers, buttons, and chips */
  a.action.lancer-#{$theme-type},
  .lancer-header.lancer-#{$theme-type},
  .lancer-#{$theme-type} .lancer-header,
  button.lancer-#{$theme-type},
  .lancer-button.lancer-#{$theme-type},
  .lancer-chip.lancer-#{$theme-type} {
    background-color: var(--#{$theme-type}-color, fuschia);
    color: var(--light-text, fuschia);
  }

  /* Text */
  .lancer-#{$theme-type}-text {
    color: var(--#{$theme-type}-color, fuschia);
  }

  /* Border */
  .lancer-border-#{$theme-type} {
    border-color: var(--#{$theme-type}-color, fuschia);

    &.card {
      border-width: 2px;
      border-style: solid;
    }
  }

  /* Foundry adds a bottom border to header elements. That's fine, but make it match. */
  h1.lancer-#{$theme-type},
  h2.lancer-#{$theme-type},
  h3.lancer-#{$theme-type},
  h4.lancer-#{$theme-type} {
    border-color: var(--#{$theme-type}-color, fuschia);
  }
}
/* Highlights */
.lancer-primary.highlight {
  background-color: var(--primary-highlight, fuchsia);
  color: var(--light-text, fuchsia);
}
.lancer-secondary.highlight {
  background-color: var(--secondary-highlight, fuchsia);
  color: var(--light-text, fuchsia);
}

/* ---------- */
